# Project Forest - 未実装機能と要件定義差分チェック

## 概要

本ドキュメントは、要件定義書で定義された機能と現在の実装状況を比較し、未実装機能を特定したものです。各機能の実装優先度と推定工数も含めて整理しています。

## 差分チェック方法

要件定義書の「4. 主要機能一覧」を基に、現在の実装状況と比較して以下の基準で分類しました：

| 記号 | 意味 | 説明 |
|------|------|------|
| ✅ | 実装完了 | 要件を満たす実装が完了 |
| 🚧 | 部分実装 | 基本機能は実装済みだが、要件の一部が未完成 |
| 📝 | 設計済み | データ構造・UI設計は完了、機能実装が未完成 |
| ❌ | 未実装 | 要件に対して実装が全くされていない |

## 1. ホーム画面（テキスト管理）

### 1.1 要件定義での機能要求

| 機能 | 要件詳細 | 実装状況 | 差分分析 |
|------|----------|----------|----------|
| テキスト確認（各言語） | 各言語のテキストを一覧表示・確認 | ❌ | **完全未実装** |
| テキスト編集（モーダルウィンドウ） | モーダルでのテキスト編集機能 | ❌ | **完全未実装** |
| 編集履歴表示（差し戻し可能） | 変更履歴の表示と巻き戻し機能 | 📝 | **DB設計済み、UI未実装** |
| テキスト検索（範囲指定対応） | 高度な検索・フィルタ機能 | ❌ | **完全未実装** |
| テキスト再生（UI上で表示） | ゲーム内表示のシミュレーション | ❌ | **完全未実装** |

### 1.2 未実装機能の詳細

#### 1.2.1 テキスト確認機能
**要件**: 各言語のテキストを一覧表示し、内容を確認できる
```
必要な実装:
- テキストエントリの一覧表示UI
- 言語切り替え機能
- ステータス別フィルタ
- ページネーション
- 文字数・行数の表示

推定工数: 2週間
優先度: 高（メイン機能）
```

#### 1.2.2 テキスト編集機能
**要件**: モーダルウィンドウでテキストの編集ができる
```
必要な実装:
- テキスト編集モーダル
- 多言語対応編集フォーム
- リアルタイム文字数カウント
- 自動保存機能
- 競合検出・解決

推定工数: 3週間
優先度: 高（メイン機能）
```

#### 1.2.3 編集履歴・差し戻し機能
**要件**: 編集履歴の表示と差し戻し機能
```
必要な実装:
- 履歴一覧表示UI
- 差分表示機能
- ワンクリック差し戻し
- 変更者・時刻の表示
- 複数バージョン比較

推定工数: 2週間
優先度: 中
```

#### 1.2.4 高度な検索機能
**要件**: 範囲指定対応の検索機能
```
必要な実装:
- 全文検索エンジン
- 範囲指定検索（日付、カテゴリ等）
- 正規表現サポート
- 検索結果のハイライト
- 検索履歴保存

推定工数: 2週間
優先度: 中
```

#### 1.2.5 テキスト再生機能
**要件**: ゲーム内表示の模擬再現
```
必要な実装:
- スタイル適用プレビュー
- テキスト送り機能
- 各デバイス表示サイズ対応
- フォント・レイアウト再現
- 実際のゲーム画面風UI

推定工数: 3週間
優先度: 低（拡張機能）
```

## 2. テキスト編集画面

### 2.1 要件定義での機能要求

| 機能 | 要件詳細 | 実装状況 | 差分分析 |
|------|----------|----------|----------|
| 言語別テキスト編集 | 各言語版の個別編集 | ❌ | **完全未実装** |
| テキスト追加・削除（ExcelライクなUI） | 表形式での効率的な編集 | ❌ | **完全未実装** |
| 同時編集検出と競合解決（差分表示） | 複数ユーザーの同時編集対応 | 📝 | **DB設計済み、機能未実装** |

### 2.2 未実装機能の詳細

#### 2.2.1 言語別編集機能
**要件**: 各言語版を個別に編集できる
```
必要な実装:
- 言語切り替えタブ
- 原文・翻訳文の並列表示
- 翻訳ステータス管理
- 翻訳者・確認者の割り当て
- 翻訳品質チェック

推定工数: 3週間
優先度: 高（メイン機能）
```

#### 2.2.2 Excelライクな編集UI
**要件**: 表形式での効率的なテキスト編集
```
必要な実装:
- グリッド形式のテキスト編集
- セル単位の編集
- 行の追加・削除
- ドラッグ&ドロップ移動
- 一括編集機能
- キーボードショートカット

推定工数: 4週間
優先度: 中
```

#### 2.2.3 同時編集・競合解決
**要件**: 複数ユーザーの同時編集と競合解決
```
必要な実装:
- WebSocket による リアルタイム通信
- 編集ロック機能
- 競合検出アルゴリズム
- 差分マージ機能
- 編集者表示（誰が編集中か）

推定工数: 4週間
優先度: 中
```

## 3. 管理画面

### 3.1 要件定義での機能要求

| 機能 | 要件詳細 | 実装状況 | 差分分析 |
|------|----------|----------|----------|
| ファイル/ラベル単位の進捗表示 | 進捗状況の可視化 | 📝 | **UI設計済み、データ未実装** |
| CSV形式でのインポート・エクスポート | データ交換機能 | 📝 | **UI設計済み、処理未実装** |
| ファイルの入出力履歴表示・ダウンロード | 履歴管理機能 | 📝 | **DB設計済み、UI未実装** |
| ファイルバージョン間の差分比較 | バージョン管理機能 | ❌ | **完全未実装** |

### 3.2 未実装機能の詳細

#### 3.2.1 進捗管理機能
**要件**: ファイル・ラベル単位での進捗可視化
```
必要な実装:
- 進捗計算ロジック
- 進捗バー・チャート表示
- ファイル別進捗一覧
- 担当者別進捗
- 期限管理・遅延アラート

推定工数: 2週間
優先度: 高（管理機能）
```

#### 3.2.2 CSV入出力機能
**要件**: データのインポート・エクスポート
```
必要な実装:
- CSVファイル解析
- データバリデーション
- エラーハンドリング
- プログレス表示
- 差分インポート
- UE用STファイル対応

推定工数: 3週間
優先度: 高（データ交換必須）
```

#### 3.2.3 ファイル履歴管理
**要件**: 入出力履歴の表示とダウンロード
```
必要な実装:
- 履歴一覧表示
- ファイルメタデータ管理
- ダウンロード機能
- 履歴検索・フィルタ
- ファイルサイズ・形式管理

推定工数: 1週間
優先度: 中
```

#### 3.2.4 バージョン差分比較
**要件**: ファイルバージョン間の差分表示
```
必要な実装:
- バージョン管理システム
- 差分計算アルゴリズム
- 差分表示UI
- マージ機能
- ブランチ管理（将来）

推定工数: 3週間
優先度: 低（拡張機能）
```

## 4. 高度な機能

### 4.1 要件定義での機能要求

| 機能 | 要件詳細 | 実装状況 | 差分分析 |
|------|----------|----------|----------|
| 未登録語句の自動検出機能 | 固有名詞の自動抽出 | 📝 | **UI設計済み、検出ロジック未実装** |
| スタイルガイドの読み込み | 外部スタイルガイド連携 | 📝 | **UI設計済み、読み込み処理未実装** |
| テキスト保存時に禁止用語検出 | リアルタイム用語チェック | 📝 | **UI設計済み、検出エンジン未実装** |
| タグ逆検索機能 | タグ使用箇所の検索 | 📝 | **UI設計済み、検索エンジン未実装** |
| タグ処理失敗時はエラーコード表示 | エラーハンドリング | ❌ | **完全未実装** |

### 4.2 未実装機能の詳細

#### 4.2.1 未登録語句自動検出
**要件**: テキスト中の未登録固有名詞を自動検出
```
必要な実装:
- 自然言語処理エンジン
- 固有名詞抽出アルゴリズム
- 既存辞書との照合
- 検出結果の管理
- 学習機能

推定工数: 4週間
優先度: 中（作業効率化）
```

#### 4.2.2 スタイルガイド連携
**要件**: 外部スタイルガイドファイルの読み込み
```
必要な実装:
- 複数ファイル形式対応
- ファイル解析エンジン
- データマッピング機能
- 差分レポート生成
- 定期同期機能

推定工数: 2週間
優先度: 中
```

#### 4.2.3 リアルタイム禁止用語検出
**要件**: テキスト保存時の自動チェック
```
必要な実装:
- 高速テキスト解析エンジン
- 部分一致・正規表現対応
- ポップアップ警告UI
- 一括置換機能
- カスタムルール設定

推定工数: 2週間
優先度: 高（品質管理）
```

#### 4.2.4 タグ逆検索エンジン
**要件**: タグの使用箇所を検索
```
必要な実装:
- 全文検索インデックス
- タグ解析エンジン
- 検索結果UI
- 使用統計
- 依存関係表示

推定工数: 2週間
優先度: 中
```

## 5. 認証・権限管理

### 5.1 要件定義での機能要求

| 機能 | 要件詳細 | 実装状況 | 差分分析 |
|------|----------|----------|----------|
| ロールベースアクセス制御（RBAC） | 4種類のユーザー権限管理 | 📝 | **DB設計済み、認証未実装** |
| ユーザー管理 | ユーザーの追加・編集・削除 | 📝 | **DB設計済み、UI未実装** |
| 編集ログの保存（監査ログ） | 全操作の記録・追跡 | 📝 | **DB設計済み、ログ機能未実装** |

### 5.2 未実装機能の詳細

#### 5.2.1 認証システム
**要件**: JWT or NextAuth による認証
```
必要な実装:
- NextAuth.js セットアップ
- ログイン・ログアウト機能
- セッション管理
- パスワードリセット
- 多要素認証（将来）

推定工数: 2週間
優先度: 高（セキュリティ必須）
```

#### 5.2.2 権限管理システム
**要件**: 4種類のユーザーロール実装
```
必要な実装:
- 権限チェック middleware
- UI要素の動的表示制御
- API エンドポイント保護
- 権限昇格機能
- 権限継承システム

推定工数: 2週間
優先度: 高（セキュリティ必須）
```

#### 5.2.3 監査ログシステム
**要件**: 全操作の記録と追跡
```
必要な実装:
- 操作ログ収集システム
- ログ検索・フィルタ機能
- 不正アクセス検出
- ログ出力・エクスポート
- 保持期間管理

推定工数: 2週間
優先度: 中（コンプライアンス）
```

## 6. UI/UX要件

### 6.1 要件定義での機能要求

| 機能 | 要件詳細 | 実装状況 | 差分分析 |
|------|----------|----------|----------|
| モーダルによる編集ウィンドウ | 各種編集でのモーダル使用 | ✅ | **実装完了** |
| 編集履歴・進捗が一目で分かるダッシュボード | 統合ダッシュボード | 📝 | **基本構造実装済み、詳細機能未実装** |
| 多言語UI（日本語・英語） | UI の国際化対応 | ❌ | **完全未実装** |
| テキスト再生機能（ゲーム内表示の模擬） | ゲーム画面風プレビュー | ❌ | **完全未実装** |

### 6.2 未実装機能の詳細

#### 6.2.1 統合ダッシュボード
**要件**: 進捗・履歴の一覧表示
```
必要な実装:
- リアルタイム統計表示
- アクティビティフィード
- 通知システム
- カスタマイズ可能ウィジェット
- レスポンシブデザイン

推定工数: 3週間
優先度: 中
```

#### 6.2.2 多言語UI
**要件**: 日本語・英語でのUI切り替え
```
必要な実装:
- next-i18next セットアップ
- 翻訳ファイル作成
- 動的言語切り替え
- 日付・数値のローカライズ
- RTL言語対応（将来）

推定工数: 2週間
優先度: 低（国際展開時）
```

## 7. 非機能要件

### 7.1 パフォーマンス要件

| 要件 | 詳細 | 実装状況 | 差分分析 |
|------|------|----------|----------|
| 同時編集時の競合検出と差分提示 | リアルタイム競合検出 | ❌ | **完全未実装** |
| 編集履歴の高速表示（過去100件以上対応） | 大量履歴の高速表示 | ❌ | **完全未実装** |
| テキスト検索は1秒以内で結果表示 | 高速検索エンジン | ❌ | **完全未実装** |

### 7.2 未実装機能の詳細

#### 7.2.1 高速検索システム
**要件**: 1秒以内での検索結果表示
```
必要な実装:
- 全文検索エンジン（Elasticsearch等）
- インデックス最適化
- 検索結果キャッシュ
- 段階的検索結果表示
- 検索パフォーマンス監視

推定工数: 3週間
優先度: 中
```

#### 7.2.2 履歴高速表示
**要件**: 100件以上の履歴を高速表示
```
必要な実装:
- 仮想スクロール
- 段階的データ読み込み
- 履歴データの圧縮
- インデックス最適化
- キャッシュ戦略

推定工数: 1週間
優先度: 中
```

## 8. API・外部連携

### 8.1 要件定義での機能要求

| 機能 | 要件詳細 | 実装状況 | 差分分析 |
|------|----------|----------|----------|
| 翻訳API（DeepL, Google Translate等） | AI翻訳機能の統合 | ❌ | **完全未実装** |
| CSV入出力、翻訳API連携 | 外部システム連携 | 📝 | **基本構造設計済み、連携処理未実装** |
| APIドキュメント（Swagger or OpenAPI） | API仕様書の自動生成 | ❌ | **完全未実装** |

### 8.2 未実装機能の詳細

#### 8.2.1 AI翻訳統合
**要件**: DeepL、Google Translate API統合
```
必要な実装:
- 複数翻訳サービス対応
- API認証・レート制限管理
- 翻訳品質スコア
- 翻訳履歴管理
- コスト管理機能

推定工数: 3週間
優先度: 中（作業効率化）
```

#### 8.2.2 REST API実装
**要件**: 全機能のREST API化
```
必要な実装:
- 全CRUD操作のAPI
- 認証・認可機能
- レート制限
- API バージョニング
- エラーハンドリング

推定工数: 4週間
優先度: 高（システム統合必須）
```

#### 8.2.3 API仕様書
**要件**: Swagger/OpenAPI ドキュメント
```
必要な実装:
- OpenAPI 3.0 仕様書
- 自動生成システム
- インタラクティブテスト
- APIクライアント生成
- バージョン管理

推定工数: 1週間
優先度: 中
```

## 9. 将来拡張候補

### 9.1 要件定義での拡張候補

| 機能 | 詳細 | 実装状況 | 優先度 |
|------|------|----------|--------|
| DeepL APIなどによるAI翻訳支援 | AI翻訳の統合 | ❌ | 中 |
| Gitライクなブランチ型履歴管理 | バージョン管理強化 | ❌ | 低 |
| Unreal Engineとの連携（STファイル自動同期） | ゲームエンジン連携 | ❌ | 低 |
| モバイル対応（レスポンシブUI） | スマートフォン対応 | 🚧 | 低 |

### 9.2 拡張機能の詳細

#### 9.2.1 Gitライクなバージョン管理
**概要**: ブランチ・マージ機能の実装
```
必要な実装:
- ブランチ作成・切り替え
- マージ・コンフリクト解決
- プルリクエスト機能
- コミット履歴管理
- タグ・リリース管理

推定工数: 8週間
優先度: 低（大規模運用時）
```

#### 9.2.2 Unreal Engine連携
**概要**: STファイルの自動同期
```
必要な実装:
- UE プロジェクト連携API
- STファイル解析・生成
- 自動同期機能
- 競合解決機能
- ビルド連携

推定工数: 6週間
優先度: 低（ゲーム開発特化）
```

## 10. 実装優先度マトリックス

### 10.1 緊急度・重要度による分類

| 優先度 | 機能カテゴリ | 推定工数 | 実装タイミング |
|--------|-------------|----------|----------------|
| **最高** | 認証・権限管理、REST API | 6週間 | 即座に着手 |
| **高** | テキスト管理UI、CSV入出力 | 8週間 | 1ヶ月以内 |
| **中** | 検索機能、進捗管理、AI翻訳 | 10週間 | 2-3ヶ月以内 |
| **低** | リアルタイム編集、UI国際化 | 8週間 | 将来実装 |
| **拡張** | Git連携、UE連携 | 14週間 | 要望次第 |

### 10.2 実装ロードマップ（推奨）

#### フェーズ1（6週間）: 基盤機能
```
週1-2: 認証システム（NextAuth.js）
週3-4: REST API実装（基本CRUD）
週5-6: 権限管理・セキュリティ強化
```

#### フェーズ2（8週間）: コア機能
```
週1-4: テキスト管理UI（一覧・編集・履歴）
週5-6: CSV入出力機能
週7-8: 禁止用語・固有名詞検出機能
```

#### フェーズ3（10週間）: 拡張機能
```
週1-3: 高速検索システム
週4-6: 進捗管理・ダッシュボード
週7-8: AI翻訳統合
週9-10: パフォーマンス最適化・テスト
```

## 11. 技術的課題・制約

### 11.1 技術的実装課題

| 課題 | 詳細 | 影響度 | 対応策 |
|------|------|--------|--------|
| リアルタイム同時編集 | WebSocket実装の複雑さ | 高 | Socket.io使用、段階的実装 |
| 大量データ処理 | パフォーマンス最適化 | 中 | ページネーション、インデックス最適化 |
| 全文検索 | 高速検索エンジンの必要性 | 中 | Elasticsearch導入 |
| ファイル処理 | 大容量CSVの処理 | 中 | ストリーミング処理、非同期処理 |

### 11.2 運用・保守課題

| 課題 | 詳細 | 影響度 | 対応策 |
|------|------|--------|--------|
| データベース設計変更 | 既存データとの互換性 | 高 | マイグレーション戦略策定 |
| API バージョン管理 | 後方互換性の維持 | 中 | セマンティックバージョニング |
| セキュリティ更新 | 定期的なライブラリ更新 | 中 | 自動依存関係更新 |
| ログ・監視 | 運用監視体制の構築 | 中 | CloudWatch、Sentry導入 |

## 12. リスクと対策

### 12.1 実装リスク

| リスク | 発生確率 | 影響度 | 対策 |
|--------|----------|--------|------|
| 技術的実装困難 | 中 | 高 | プロトタイプでの事前検証 |
| パフォーマンス問題 | 中 | 中 | 負荷テスト・最適化 |
| セキュリティ脆弱性 | 低 | 高 | セキュリティ監査・テスト |
| データ整合性問題 | 低 | 高 | トランザクション・バリデーション強化 |

### 12.2 運用リスク

| リスク | 発生確率 | 影響度 | 対策 |
|--------|----------|--------|------|
| 大量データ移行失敗 | 中 | 高 | 段階的移行・ロールバック計画 |
| 同時接続数増加 | 中 | 中 | Auto Scaling・負荷分散 |
| 障害・ダウンタイム | 低 | 高 | 冗長化・監視強化 |
| データ損失 | 低 | 高 | 定期バックアップ・災害復旧計画 |

## 13. まとめ

### 13.1 実装完了に向けた総工数

| カテゴリ | 工数 | 説明 |
|----------|------|------|
| **最低限必須機能** | 14週間 | 基本的なテキスト管理機能 |
| **標準機能** | 24週間 | 要件定義の80%を満たす機能 |
| **完全機能** | 34週間 | 要件定義の全機能 |
| **拡張機能含む** | 48週間 | 将来拡張も含めた完全版 |

### 13.2 実装推奨順序

1. **認証・API基盤**（6週間）: システムの土台
2. **テキスト管理コア機能**（8週間）: メイン機能
3. **データ交換・管理機能**（6週間）: 運用に必要
4. **高度な機能・最適化**（4週間）: 品質向上

### 13.3 成功要因

- **段階的実装**: 一度に全機能を実装せず、段階的にリリース
- **プロトタイプ検証**: 技術的課題は事前にプロトタイプで検証
- **ユーザーフィードバック**: 早期段階でのユーザーテスト実施
- **継続的な品質管理**: テスト・監視の自動化

現在の実装状況（約50%完了）から、最低限の実用性を持つバージョンまでは約14週間、要件定義を満たす完全版までは約24週間の開発期間が必要と推定されます。

---

**最終更新**: 2024年1月  
**バージョン**: 1.0.0  
**作成者**: Project Forest 開発チーム